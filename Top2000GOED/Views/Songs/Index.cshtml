@model IPagedList<Top2000GOED.Models.Song>

@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

@using PagedList.Mvc;
@using PagedList;
@using Top2000GOED.Models

<center><h2>Liedjes</h2></center>

<hr />

<p>
	@if (this.User.IsInRole("admin"))
	{
		@Html.ActionLink("Aanmaken", "Create");
	}
</p>

@using (Html.BeginForm("Index", "Songs", FormMethod.Get))
{
	@Html.TextBox("Searching")<input style="margin-left:5px" type="submit" value="Zoeken" class="btn-primary btn-default" />
}

<hr />

<table class="table">
	<tr>
		<th>

		</th>
		<th>
			Naam
		</th>
		<th>
			Titel
		</th>
		<th>
			Jaar
		</th>
		<th></th>
	</tr>

	@if (Model.Count() == 0)
	{
		<tr>
			<td colspan="3" style="color: red">
				Niks Gevonden!!
			</td>
		</tr>
	}

	else
	{

		foreach (var item in Model)

		{
			<tr>
				<td>
					@Html.DisplayFor(modelItem => item.Artiest.Song.Count)
					<hr>
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Artiest.naam)
					<hr />
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.titel)
					<hr />
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.jaar)
					<hr />
				</td>
				<td>



					<!--Als admin is ingelogd kan je een liedje bewerken en verwijderen. Anders niet-->
					@if (this.User.IsInRole("admin"))
					{
						@Html.ActionLink("Aanpassen", "Edit", new { id = item.songid })
						@Html.ActionLink("Verwijderen", "Delete", new { id = item.songid })
						@Html.ActionLink("Overzicht", "Details", new { id = item.songid })
					}
				</td>
			</tr>
		}
	}
</table>

@Html.PagedListPager(Model, i => Url.Action("Index", "Songs", new { i, search = Request.QueryString["search"] }))